/*
  Created by liqf(Elilee) in 2017-06-12
  It's for LilanzIM
  Version:0.1.5
*/(function(d){var f,g;f={appInOS:"",ver:"",isInApp:!1,init:function(){var a=this;return new Promise(function(b,c){a.setupWebViewJavascriptBridge(function(c){c.callHandler("bridgeReady",{},function(c){"iOSBridgeReady"==c&&(a.ver="0.1.5",a.appInOS="iOS",a.isInApp=!0,d.llApp=a,console.log("LilanzIM iOS \u6ce8\u5165\u6210\u529f\uff01"),b(!0))})})})},setupWebViewJavascriptBridge:function(a){if(d.WebViewJavascriptBridge)return a(WebViewJavascriptBridge);if(d.WVJBCallbacks)return d.WVJBCallbacks.push(a);d.WVJBCallbacks=[a];var b=document.createElement("iframe");b.style.display="none";b.src="wvjbscheme://__BRIDGE_LOADED__";document.documentElement.appendChild(b);setTimeout(function(){document.documentElement.removeChild(b)},0)},showMessage:function(a,b){b=b||function(){};this.setupWebViewJavascriptBridge(function(c){c.callHandler("showMessage",{text:a},function(a){b(a+"|"+isInApp)})})},showLoading:function(a){this.setupWebViewJavascriptBridge(function(b){b.callHandler("showLoading",{text:a},function(a){})})},hideLoading:function(){this.setupWebViewJavascriptBridge(function(a){a.callHandler("hideLoading",{},function(a){})})},imageUpload:function(a,b){var c="http://tm.lilanz.com/QYWX/Test/AppHTML/ghspg/gyspg.aspx";1==arguments.length?"function"===typeof a?b=a:c=a||c:c=a||c;this.setupWebViewJavascriptBridge(function(a){a.callHandler("imageUpload",{server:c},function(a){});a.registerHandler("Res_imageUpload",function(a){(b||function(a){alert("app:"+a)})(a)})})},previewImage:function(a){this.setupWebViewJavascriptBridge(function(b){b.callHandler("previewImage",a,function(a){})})},setWKCookie:function(a,b){b=b||function(){};this.setupWebViewJavascriptBridge(function(c){c.callHandler("setWKCookie",a,function(a){b(a)})})},closeWKView:function(){this.setupWebViewJavascriptBridge(function(a){a.callHandler("closeWKView",{},function(a){})})},scanQRCode:function(a){a=a||function(){};this.setupWebViewJavascriptBridge(function(b){b.callHandler("scanQRCode",{},function(a){});b.registerHandler("Res_scanQRCode",function(b){a(b)})})},getLocation:function(a){a=a||function(){};this.setupWebViewJavascriptBridge(function(b){b.callHandler("getLocation",{},function(a){});b.registerHandler("Res_getLocation",function(b){a(b)})})},startChat:function(a){this.setupWebViewJavascriptBridge(function(b){b.callHandler("startChat",{uid:a},function(a){})})},openWebView:function(a){this.setupWebViewJavascriptBridge(function(b){b.callHandler("openWebView",{url:a},function(a){})})},getAppToken:function(a){a=a||function(){};this.setupWebViewJavascriptBridge(function(b){b.callHandler("getAppToken",{},function(b){a(b)})})},doSendURL:function(a,b,c,d,e){e=e||function(){};this.setupWebViewJavascriptBridge(function(f){f.callHandler("doSendURL",{qyuid:a,title:b,desc:c,url:d},function(a){e(a)})})},showNavBar:function(){this.setupWebViewJavascriptBridge(function(a){a.callHandler("showNavBar",{},function(a){})})},hideNavBar:function(){this.setupWebViewJavascriptBridge(function(a){a.callHandler("hideNavBar",{},function(a){})})},setStatusBar:function(a,b){b=b||"black";a=a||"#ffffff";b=b.toLowerCase();"white"!=b&&"black"!=b&&(b="black");this.setupWebViewJavascriptBridge(function(c){c.callHandler("setStatusBar",{statusBarBackgroundColor:a,statusBarTextStyle:b},function(){})})}};g={_funcAddrs:[],appInOS:"",ver:"",isInApp:!1,init:function(){var a=this;return new Promise(function(b,c){"undefined"!==typeof _JIAndroidObj?"AndroidBridgeReady"==_JIAndroidObj.bridgeReady()?(a.ver="0.1.5",a.appInOS="Android",a.isInApp=!0,d.llApp=a,console.log("LilanzIM Android \u6ce8\u5165\u6210\u529f\uff01"),b(!0)):b(!1):b(!1)})},getLocation:function(a){this._funcAddrs.location=a;_JIAndroidObj.getLocation()},Res_getLocation:function(a){(this._funcAddrs.location||function(){})(a)},scanQRCode:function(a){this._funcAddrs.scanqrcode=a;_JIAndroidObj.scanQRCode()},Res_scanQRCode:function(a){(this._funcAddrs.scanqrcode||function(){})(a)},closeWKView:function(){_JIAndroidObj.closeWKView()},startChat:function(a){_JIAndroidObj.startChat(a)},imageUpload:function(a,b){var c="http://tm.lilanz.com/QYWX/Test/AppHTML/ghspg/gyspg.aspx";1==arguments.length?"function"===typeof a?b=a:c=a||c:c=a||c;this._funcAddrs.imgupload=b;_JIAndroidObj.imageUpload(c)},Res_imageUpload:function(a){(this._funcAddrs.imgupload||function(a){alert(a)})(a)},previewImage:function(a){_JIAndroidObj.previewImage(JSON.stringify(a))},openWebView:function(a){_JIAndroidObj.openWebView(a)},getAppToken:function(a){var b=_JIAndroidObj.getAppToken();(a||function(){})(b)},doSendURL:function(a,b,c,d,e){a=_JIAndroidObj.doSendURL(a,b,c,d);(e||function(){})(a)},showLoading:function(a){_JIAndroidObj.showLoading(a)},hideLoading:function(){_JIAndroidObj.hideLoading()},hideNavBar:function(){_JIAndroidObj.hideNavBar()},showNavBar:function(){_JIAndroidObj.showNavBar()},setStatusBar:function(){alert("[setStatusBar]\u5c1a\u672a\u5b9e\u73b0\uff01")}};d.llApp={appInOS:"",ver:"",isInApp:!1,init:function(){return new Promise(function(a,b){g.init().then(function(b){b?a("android ready"):f.init().then(function(b){b&&a("ios ready")})})})}}})(window);