<!DOCTYPE html>
<html lang="zh-cmn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <title>关注我们</title>
    <link rel="stylesheet" href="../../res/css/NewSalerBind/guide.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            <img src="../../res/img/NewSalerBind/logo_qsw.png" alt="">
        </div>
        <div class="publicNo">利郎轻商务</div>
        <div class="guide">
            <p class="title">正在绑定您的专属导购</p>
            <div class="bind">
                <div class="icon">
                    <div class="border">
                        <img src="../../res/img/NewSalerBind/logo_lilanz.png" alt="">
                    </div>
                </div>
                <p class="name">杨明明</p>
                <div class="stars">
                    <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                    <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                    <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                    <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                    <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                </div>
                <p class="num">服务人数: <span>12</span></p>
            </div>
            <div class="change" style="display: none;">
                <div class="old-guide">
                    <div class="icon">
                        <div class="border">
                            <img src="../../res/img/NewSalerBind/logo_qsw.png" alt="">
                        </div>
                    </div>
                    <p class="name">杨明明</p>
                    <div class="stars">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                    </div>
                    <p class="num">服务人数: <span>12</span></p>
                </div>
                <img src="../../res/img/NewSalerBind/arrow_right.png" alt="">
                <div class="new-guide">
                    <div class="icon">
                        <div class="border">
                            <img src="../../res/img/NewSalerBind/logo_lilanz.png" alt="">
                        </div>
                    </div>
                    <p class="name">杨明明</p>
                    <div class="stars">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                        <img src="../../res/img/NewSalerBind/star_selected.png" alt="">
                    </div>
                    <p class="num">服务人数: <span>12</span></p>
                </div>
            </div>
        </div>
        <div class="store-detail">
            <div class="store-name">
                <span>已绑门店</span>
                <p>晋江万达室内店</p>
            </div>
            <div class="card">
                <span>线下卡</span>
                <p><img src="../../res/img/NewSalerBind/tick.png" alt=""> 已关联</p>
            </div>
        </div>
        <div class="line"></div>
        <div class="submit">
            <a>立即绑定</a>
        </div>
        <div class="other" style="display: none;">
            <a href="javascript:void(0)">注册新会员</a>
            <a href="javascript:void(0)">关联线下卡</a>
        </div>
    </div>
    <div class="reason" style="display: none;">
        <div class="list">
            <div class="title">
                <img src="../../res/img/NewSalerBind/icon_back.png" alt="">
                <span>更换导购原因</span>
            </div>
            <ul>
                <li class="onselected">
                    <span>原因 1</span>
                    <img src="../../res/img/NewSalerBind/right.png" alt="">
                    <span class="unselected"></span>
                </li>
                <li>
                    <span>原因 2</span>
                    <img src="../../res/img/NewSalerBind/right.png" alt="">
                    <span class="unselected"></span>
                </li>
                <li>
                    <span>原因 3</span>
                    <img src="../../res/img/NewSalerBind/right.png" alt="">
                    <span class="unselected"></span>
                </li>
                <li>
                    <span>原因 4</span>
                    <img src="../../res/img/NewSalerBind/right.png" alt="">
                    <span class="unselected"></span>
                </li>
                <li>
                    <span>原因 5</span>
                    <img src="../../res/img/NewSalerBind/right.png" alt="">
                    <span class="unselected"></span>
                </li>
            </ul>
        </div>
        <div class="submit">
            <a>确定</a>
        </div>
    </div>
    <div class="prompt" style="display: none;">
        <div class="alert" style="display: none;">
            <div class="title">
                <span>绑定成功</span>
                <img src="../../res/img/NewSalerBind/close.png" alt="">
            </div>
            <div class="content">
                <img class="pass" src="../../res/img/pass.png" alt="">
                <img class="fail" src="../../res/img/fail.png" alt="">
                <span>XXX已绑定为您的专属导购</span>
            </div>
            <div class="btn">
                <a>确定</a>
            </div>
        </div>
        <div class="loading" style="display: none;">
            <img src="../../res/img/NewSalerBind/loading.png" alt="">
            <span>正在加载..</span>
        </div>
    </div>
    <!-- <script src="../../res/js/jquery-3.2.1.min.js"></script> -->
    <script>
        (function(window, undefind) {
            var configKey = '5', bindStoreName = '', OldSalerStr = '', NewSalerStr = '';
            var isVIP = false;

            function init() {
                bindEvents();
                bindSelectorEvents();
            }

            function bindEvents() {
                document.querySelector('.container .submit a').addEventListener('click', function() {
                    // document.querySelector('.bind .stars').innerHTML = getStarsHtml(3);
                    showReason();
                });

                document.querySelector('.reason .title').addEventListener('click', function() {
                    showContainer();
                });

                document.querySelector('.reason .submit a').addEventListener('click', function() {
                    showLoading();

                    setTimeout(function() {
                        showOther();
                        showAlert();
                    }, 1000);
                })

                document.querySelector('.alert .btn a').addEventListener('click', function() {
                    hidePrompt();
                    showBind();
                });

                document.querySelector('.alert .title img').addEventListener('click', function() {
                    hidePrompt();
                    showBind();
                })
            }

            function bindSelectorEvents() {
                var li = document.querySelectorAll('.reason li');

                for (var i = 0; i < li.length; i++) {
                    li[i].addEventListener('click', function() {
                        var doms = siblings(this);
                        for (var i = 0; i < doms.length; i ++) {
                            doms[i].classList.remove('onselected');
                        }
                        this.classList.add('onselected')
                    });
                }
            }

            function showBind() {
                document.querySelector('.change').style = 'display: none';
                document.querySelector('.bind').style = '';
                showContainer();
            }

            function showChange() {
                document.querySelector('.bind').style = 'display: none';
                document.querySelector('.change').style = '';
                showContainer();
            }

            function showLoading(text) {
                if (text && text !== '') {
                    document.querySelector('.loading span').innerText = text
                } else {
                    document.querySelector('.loading span').innerText = '正在加载..'
                }

                document.querySelector('.alert').style = 'display: none;';
                document.querySelector('.loading').style = 'display: block;';
                document.querySelector('.prompt').style = 'display: block;';
            }

            function showAlert(data) {
                var data = data ? data : null;

                if (data && data.title && data.title !== '') {
                    document.querySelector('.alert .title span').innerText = data.title;
                } else {
                    document.querySelector('.alert .title span').innerText = '绑定成功';
                }

                if (data && data.text && data.text !== '') {
                    document.querySelector('.alert .content span').innerText = data.text;
                } else {
                    document.querySelector('.alert .content span').innerText = 'Test已绑定为您的专属导购';
                }

                if (data && data.err) {
                    document.querySelector('.alert').classList.add('err');
                } else {
                    document.querySelector('.alert').classList.remove('err');
                }

                document.querySelector('.loading').style = 'display: none;';
                document.querySelector('.alert').style = 'display: block;';
                document.querySelector('.prompt').style = 'display: block;';
            }

            function hidePrompt() {
                document.querySelector('.loading').style = 'display: none;';
                document.querySelector('.alert').style = 'display: none;';
                document.querySelector('.prompt').style = 'display: none;';
            }

            function showReason() {
                document.querySelector('.container').style = 'display: none;';
                document.querySelector('.reason').style = 'display: block;';
            }

            function showContainer() {
                document.querySelector('.reason').style = 'display: none;';
                document.querySelector('.container').style = '';
            }

            function showOther() {
                document.querySelector('.container .submit').style = 'display: none;';
                document.querySelector('.container .other').style = '';
            }

            function getStarsHtml(num) {
                var num = num ? num : 0;
                var html = null;

                html = new Array(num + 1).join('<img src="../../res/img/NewSalerBind/star_selected.png" alt="">') + 
                new Array(6 - num).join('<img src="../../res/img/NewSalerBind/star_default.png" alt="">');

                return html;
            }

            function siblings(elm) {
                var a = [];
                var p = elm.parentNode.children;
                for (var i = 0, pl = p.length; i < pl; i++) {
                    if (p[i] !== elm) a.push(p[i]);
                }
                return a;
            }

            init();
        }) (window)
    </script>
</body>
</html>