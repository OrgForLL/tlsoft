(function(e,n){function l(){var a=h.getBoundingClientRect().width/10;h.style.fontSize=a+"px";k.rem=e.rem=a}var c=e.document,h=c.documentElement,f=c.querySelector('meta[name\x3d"viewport"]'),d=c.querySelector('meta[name\x3d"flexible"]'),a=0,b=0,m,k=n.flexible||(n.flexible={});if(f){if(console.warn("\u5c06\u6839\u636e\u5df2\u6709\u7684meta\u6807\u7b7e\u6765\u8bbe\u7f6e\u7f29\u653e\u6bd4\u4f8b"),d=f.getAttribute("content").match(/initial\-scale=([\d\.]+)/))b=parseFloat(d[1]),a=parseInt(1/b)}else if(d){var g=d.getAttribute("content");g&&(d=g.match(/initial\-dpr=([\d\.]+)/),g=g.match(/maximum\-dpr=([\d\.]+)/),d&&(a=parseFloat(d[1]),b=parseFloat((1/a).toFixed(2))),g&&(a=parseFloat(g[1]),b=parseFloat((1/a).toFixed(2))))}a||b||(e.navigator.appVersion.match(/android/gi),b=e.navigator.appVersion.match(/iphone/gi),d=e.devicePixelRatio,a=b?3<=d&&(!a||3<=a)?3:2<=d&&(!a||2<=a)?2:1:1,b=1/a);h.setAttribute("data-dpr",a);f||(f=c.createElement("meta"),f.setAttribute("name","viewport"),f.setAttribute("content","initial-scale\x3d"+b+", maximum-scale\x3d"+b+", minimum-scale\x3d"+b+", user-scalable\x3dno"),h.firstElementChild?h.firstElementChild.appendChild(f):(b=c.createElement("div"),b.appendChild(f),c.write(b.innerHTML)));e.addEventListener("resize",function(){clearTimeout(m);m=setTimeout(l,300)},!1);e.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(m),m=setTimeout(l,300))},!1);"complete"===c.readyState?c.body.style.fontSize=12*a+"px":c.addEventListener("DOMContentLoaded",function(b){c.body.style.fontSize=12*a+"px"},!1);l();k.dpr=e.dpr=a;k.refreshRem=l;k.rem2px=function(a){var b=parseFloat(a)*this.rem;"string"===typeof a&&a.match(/rem$/)&&(b+="px");return b};k.px2rem=function(a){var b=parseFloat(a)/this.rem;"string"===typeof a&&a.match(/px$/)&&(b+="rem");return b}})(window,window.lib||(window.lib={}));