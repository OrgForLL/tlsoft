2016-08-06 08:51:56 - [信息]error:【数据库操作错误】在将 varchar 值 '1487803,487989' 转换成数据类型 int 时失败。
 declare @djids varchar(500) 
                                  SELECT @djids=ids FROM  sc_t_chqw_idsxxb WHERE id=@djid                                  
                                  select a.* into #myzb from cl_v_dddjmx a where a.id in (@djids)                            
                                  select distinct a.scddbh,a.chdm,a.sl,a.mxid    
                                  from #myzb a 
                                  inner join cl_v_chdmb c on a.chdm=c.chdm 
                                  where c.tzid=1 and a.djlx=624
                                  order by a.mxid 
                                  drop table #myzb; 
2016-08-06 08:51:56 - [信息]error:【数据库操作错误】在将 varchar 值 '1487803,487989' 转换成数据类型 int 时失败。
 declare @djids varchar(500) 
                                  SELECT @djids=ids FROM  sc_t_chqw_idsxxb WHERE id=@djid                                  
                                  select a.* into #myzb from cl_v_dddjmx a where a.id in (@djids)                            
                                  select distinct a.scddbh,a.chdm,a.sl,a.mxid    
                                  from #myzb a 
                                  inner join cl_v_chdmb c on a.chdm=c.chdm 
                                  where c.tzid=1 and a.djlx=624
                                  order by a.mxid 
                                  drop table #myzb; 
2016-08-06 10:56:03 - [信息]error:【数据库操作错误】在将 varchar 值 'S' 转换成数据类型 int 时失败。
 DECLARE @qwid INT,@lydjid INT,@djly varchar(50); select @qwid=a.id,@lydjid=1548485 from WarehouseLoc a where a.tzid='1' and a.dm='A010200';  IF NOT EXISTS(SELECT * FROM sc_t_chqwwhb WHERE lydjlx='561' AND lydjmxid='9950464')    begin      if(3='S')         begin           SELECT @djly=SUBSTRING(isnull(ids,0),1,1) FROM  sc_t_chqw_idsxxb WHERE id='1548485'           if(@djly='1')              select @lydjid=a.id from cl_v_dddjmx a where a.djlx='561' AND a.mxid='9950464'         end      INSERT INTO sc_t_chqwwhb (gzh,chdm,ckqwid,sl,lydjid,lydjlx,lydjmxid,createDate,Creater) VALUES('NBGZH','M81903810',@qwid,'4.00','1548485','561','9950464',GETDATE(),'cfk');    end  else     UPDATE sc_t_chqwwhb SET gzh='NBGZH',chdm='M81903810',ckqwid=@qwid,sl='4.00' WHERE lydjlx='561' AND lydjmxid='9950464'  
2016-08-06 10:56:19 - [信息]error:【数据库操作错误】在将 varchar 值 'S' 转换成数据类型 int 时失败。
 DECLARE @qwid INT,@lydjid INT,@djly varchar(50); select @qwid=a.id,@lydjid=1548485 from WarehouseLoc a where a.tzid='1' and a.dm='A010200';  IF NOT EXISTS(SELECT * FROM sc_t_chqwwhb WHERE lydjlx='561' AND lydjmxid='9950464')    begin      if(3='S')         begin           SELECT @djly=SUBSTRING(isnull(ids,0),1,1) FROM  sc_t_chqw_idsxxb WHERE id='1548485'           if(@djly='1')              select @lydjid=a.id from cl_v_dddjmx a where a.djlx='561' AND a.mxid='9950464'         end      INSERT INTO sc_t_chqwwhb (gzh,chdm,ckqwid,sl,lydjid,lydjlx,lydjmxid,createDate,Creater) VALUES('NBGZH','M81903810',@qwid,'4.00','1548485','561','9950464',GETDATE(),'cfk');    end  else     UPDATE sc_t_chqwwhb SET gzh='NBGZH',chdm='M81903810',ckqwid=@qwid,sl='4.00' WHERE lydjlx='561' AND lydjmxid='9950464'  
2016-08-25 15:58:30 - [信息]error:【数据库操作错误】将 expression 转换为数据类型 int 时出现算术溢出错误。
不能将值 NULL 插入列 'ckqwid'，表 'tlsoft.dbo.sc_t_chqwwhb'；列不允许有空值。UPDATE 失败。
语句已终止。
 DECLARE @qwid INT,@lydjid INT,@djly varchar(50); select @qwid=a.id,@lydjid=201307100004 from WarehouseLoc a where a.tzid='1' and a.dm='A010102';  if('1'='S')     begin       SELECT @djly=SUBSTRING(isnull(ids,0),1,1) FROM  cl_t_cwdjtmIDgl WHERE id='201307100004'       if(@djly='1')          select @lydjid=a.id from cl_v_dddjmx a where a.djlx='624' AND a.mxid='6143152'     end  if('1'='1')     begin       SELECT @lydjid=a.id       FROM CL_T_dddjb a        where (CAST(DATENAME(yyyy,a.zdrq) AS VARCHAR(max))+CAST(DATENAME(mm,a.zdrq) AS VARCHAR(max))+CAST(a.djh AS VARCHAR(max)))='201307100004' AND a.djlx=624     end  IF NOT EXISTS(SELECT * FROM sc_t_chqwwhb WHERE lydjid=@lydjid AND lydjlx='624' AND lydjmxid='6143152')     INSERT INTO sc_t_chqwwhb (gzh,chdm,ckqwid,sl,lydjid,lydjlx,lydjmxid,createDate,Creater) VALUES('2QCK0011Y-0401','M21000435',@qwid,'1.00',@lydjid,'624','6143152',GETDATE(),'cfk');  else     UPDATE sc_t_chqwwhb SET gzh='2QCK0011Y-0401',chdm='M21000435',ckqwid=@qwid,sl='1.00' WHERE lydjlx='624' AND lydjmxid='6143152'  
2016-08-25 15:59:52 - [信息]error:【数据库操作错误】将 expression 转换为数据类型 int 时出现算术溢出错误。
不能将值 NULL 插入列 'ckqwid'，表 'tlsoft.dbo.sc_t_chqwwhb'；列不允许有空值。UPDATE 失败。
语句已终止。
 DECLARE @qwid INT,@lydjid INT,@djly varchar(50); select @qwid=a.id,@lydjid=201307100004 from WarehouseLoc a where a.tzid='1' and a.dm='A010102';  if('1'='S')     begin       SELECT @djly=SUBSTRING(isnull(ids,0),1,1) FROM  cl_t_cwdjtmIDgl WHERE id='201307100004'       if(@djly='1')          select @lydjid=a.id from cl_v_dddjmx a where a.djlx='624' AND a.mxid='6143152'     end  if('1'='1')     begin       SELECT @lydjid=a.id       FROM CL_T_dddjb a        where (CAST(DATENAME(yyyy,a.zdrq) AS VARCHAR(max))+CAST(DATENAME(mm,a.zdrq) AS VARCHAR(max))+CAST(a.djh AS VARCHAR(max)))='201307100004' AND a.djlx=624     end  IF NOT EXISTS(SELECT * FROM sc_t_chqwwhb WHERE lydjid=@lydjid AND lydjlx='624' AND lydjmxid='6143152')     INSERT INTO sc_t_chqwwhb (gzh,chdm,ckqwid,sl,lydjid,lydjlx,lydjmxid,createDate,Creater) VALUES('2QCK0011Y-0401','M21000435',@qwid,'1.00',@lydjid,'624','6143152',GETDATE(),'cfk');  else     UPDATE sc_t_chqwwhb SET gzh='2QCK0011Y-0401',chdm='M21000435',ckqwid=@qwid,sl='1.00' WHERE lydjlx='624' AND lydjmxid='6143152'  
2016-08-30 17:43:50 - [信息]error:【数据库操作错误】'end' 附近有语法错误。
 DECLARE @userName VARCHAR(50),@cwid int; SELECT @userName=cname FROM t_user WHERE NAME='cfk';  SELECT @cwid=isnull(id,0) FROM dbo.cl_t_cwxxb WHERE chdm='M21000435' AND gzh='2QCK0011Y-0401' AND ckid='10664'  IF @cwid=0     insert into cl_t_cwxxb (gzh,chdm,cw,tzid,xgrq,xgr,ckid) values('2QCK0011Y-0401','M21000435','A010102/A010101','1',GETDATE(),@userName,'10664');  else  begin        DECLARE @i INT,@cws varchar(max); SET @i=0;        SELECT @cws=isnull(cw,'') FROM dbo.cl_t_cwxxb WHERE id=@cwid        WHILE (dbo.split('A010102/A010101','/',@i)<>'')         begin             IF CHARINDEX(dbo.split('A010102/A010101','/',@i),@cws,0)=0              UPDATE cl_t_cwxxb SET gzh='2QCK0011Y-0401',chdm='M21000435',cw=cw+'/'+dbo.split('A010102/A010101','/',@i),tzid='1',xgrq=GETDATE(),xgr=@userName,ckid='10664' WHERE id='206'        else  end 
2016-08-30 17:45:37 - [信息]error:【数据库操作错误】超时时间已到。在操作完成之前超时时间已过或服务器未响应。
 DECLARE @userName VARCHAR(50),@cwid int; SELECT @userName=cname FROM t_user WHERE NAME='cfk';  SELECT @cwid=isnull(id,0) FROM dbo.cl_t_cwxxb WHERE chdm='M21000435' AND gzh='2QCK0011Y-0401' AND ckid='10664'  IF @cwid=0     insert into cl_t_cwxxb (gzh,chdm,cw,tzid,xgrq,xgr,ckid) values('2QCK0011Y-0401','M21000435','A010101/A010102','1',GETDATE(),@userName,'10664');  else  begin        DECLARE @i INT,@cws varchar(max); SET @i=0;        SELECT @cws=isnull(cw,'') FROM dbo.cl_t_cwxxb WHERE id=@cwid        WHILE (dbo.split('A010101/A010102','/',@i)<>'')         begin             IF CHARINDEX(dbo.split('A010101/A010102','/',@i),@cws,0)=0              UPDATE cl_t_cwxxb SET gzh='2QCK0011Y-0401',chdm='M21000435',cw=cw+'/'+dbo.split('A010101/A010102','/',@i),tzid='1',xgrq=GETDATE(),xgr=@userName,ckid='10664' WHERE id='206'        end  end 
2016-08-30 17:47:29 - [信息]error:【数据库操作错误】超时时间已到。在操作完成之前超时时间已过或服务器未响应。
 DECLARE @userName VARCHAR(50),@cwid int; SELECT @userName=cname FROM t_user WHERE NAME='cfk';  SELECT @cwid=isnull(id,0) FROM dbo.cl_t_cwxxb WHERE chdm='M21000435' AND gzh='2QCK0011Y-0401' AND ckid='10664'  IF @cwid=0     insert into cl_t_cwxxb (gzh,chdm,cw,tzid,xgrq,xgr,ckid) values('2QCK0011Y-0401','M21000435','A010101/A010102','1',GETDATE(),@userName,'10664');  else  begin        DECLARE @i INT,@cws varchar(max); SET @i=0;        SELECT @cws=isnull(cw,'') FROM dbo.cl_t_cwxxb WHERE id=@cwid        WHILE (dbo.split('A010101/A010102','/',@i)<>'')         begin             IF CHARINDEX(dbo.split('A010101/A010102','/',@i),@cws,0)=0              UPDATE cl_t_cwxxb SET gzh='2QCK0011Y-0401',chdm='M21000435',cw=cw+'/'+dbo.split('A010101/A010102','/',@i),tzid='1',xgrq=GETDATE(),xgr=@userName,ckid='10664' WHERE id='206'        end  end 
2016-08-31 10:37:31 - [信息]error:【数据库操作错误】必须声明标量变量 "@djid"。
 SELECT t1.gzh scddbh,t1.chdm,isnull(t1.sl,0) as sl,t1.id mxid,t1.ckid,cw.id cwid 
                              from cl_T_chgzhkcmx as t1
                              inner join cl_v_chdmb as ch ON t1.chdm=ch.chdm and t1.tzid=@tzid
                              inner join yx_t_ckdmb as ck on t1.ckid=ck.id
                              LEFT JOIN cl_t_cwxxb AS cw on t1.chdm=cw.chdm and t1.gzh=cw.gzh  and t1.ckid=cw.ckid  and cw.tzid=@tzid
                              where t1.tzid=@tzid and t1.chdm=@djid and t1.ckid=@ckid and (isnull(cw.id,0)=0 or cw.cw='') 
2016-08-31 10:37:31 - [信息]error:【数据库操作错误】必须声明标量变量 "@djid"。
 SELECT t1.gzh scddbh,t1.chdm,isnull(t1.sl,0) as sl,t1.id mxid,t1.ckid,cw.id cwid 
                              from cl_T_chgzhkcmx as t1
                              inner join cl_v_chdmb as ch ON t1.chdm=ch.chdm and t1.tzid=@tzid
                              inner join yx_t_ckdmb as ck on t1.ckid=ck.id
                              LEFT JOIN cl_t_cwxxb AS cw on t1.chdm=cw.chdm and t1.gzh=cw.gzh  and t1.ckid=cw.ckid  and cw.tzid=@tzid
                              where t1.tzid=@tzid and t1.chdm=@djid and t1.ckid=@ckid and (isnull(cw.id,0)=0 or cw.cw='') 
2016-08-31 10:37:42 - [信息]error:【数据库操作错误】必须声明标量变量 "@djid"。
 SELECT t1.gzh scddbh,t1.chdm,isnull(t1.sl,0) as sl,t1.id mxid,t1.ckid,cw.id cwid 
                              from cl_T_chgzhkcmx as t1
                              inner join cl_v_chdmb as ch ON t1.chdm=ch.chdm and t1.tzid=@tzid
                              inner join yx_t_ckdmb as ck on t1.ckid=ck.id
                              LEFT JOIN cl_t_cwxxb AS cw on t1.chdm=cw.chdm and t1.gzh=cw.gzh  and t1.ckid=cw.ckid  and cw.tzid=@tzid
                              where t1.tzid=@tzid and t1.chdm=@djid and t1.ckid=@ckid and (isnull(cw.id,0)=0 or cw.cw='') 
2016-08-31 10:37:42 - [信息]error:【数据库操作错误】必须声明标量变量 "@djid"。
 SELECT t1.gzh scddbh,t1.chdm,isnull(t1.sl,0) as sl,t1.id mxid,t1.ckid,cw.id cwid 
                              from cl_T_chgzhkcmx as t1
                              inner join cl_v_chdmb as ch ON t1.chdm=ch.chdm and t1.tzid=@tzid
                              inner join yx_t_ckdmb as ck on t1.ckid=ck.id
                              LEFT JOIN cl_t_cwxxb AS cw on t1.chdm=cw.chdm and t1.gzh=cw.gzh  and t1.ckid=cw.ckid  and cw.tzid=@tzid
                              where t1.tzid=@tzid and t1.chdm=@djid and t1.ckid=@ckid and (isnull(cw.id,0)=0 or cw.cw='') 
2016-08-31 10:37:46 - [信息]error:【数据库操作错误】必须声明标量变量 "@djid"。
 SELECT t1.gzh scddbh,t1.chdm,isnull(t1.sl,0) as sl,t1.id mxid,t1.ckid,cw.id cwid 
                              from cl_T_chgzhkcmx as t1
                              inner join cl_v_chdmb as ch ON t1.chdm=ch.chdm and t1.tzid=@tzid
                              inner join yx_t_ckdmb as ck on t1.ckid=ck.id
                              LEFT JOIN cl_t_cwxxb AS cw on t1.chdm=cw.chdm and t1.gzh=cw.gzh  and t1.ckid=cw.ckid  and cw.tzid=@tzid
                              where t1.tzid=@tzid and t1.chdm=@djid and t1.ckid=@ckid and (isnull(cw.id,0)=0 or cw.cw='') 
2016-08-31 10:37:46 - [信息]error:【数据库操作错误】必须声明标量变量 "@djid"。
 SELECT t1.gzh scddbh,t1.chdm,isnull(t1.sl,0) as sl,t1.id mxid,t1.ckid,cw.id cwid 
                              from cl_T_chgzhkcmx as t1
                              inner join cl_v_chdmb as ch ON t1.chdm=ch.chdm and t1.tzid=@tzid
                              inner join yx_t_ckdmb as ck on t1.ckid=ck.id
                              LEFT JOIN cl_t_cwxxb AS cw on t1.chdm=cw.chdm and t1.gzh=cw.gzh  and t1.ckid=cw.ckid  and cw.tzid=@tzid
                              where t1.tzid=@tzid and t1.chdm=@djid and t1.ckid=@ckid and (isnull(cw.id,0)=0 or cw.cw='') 
