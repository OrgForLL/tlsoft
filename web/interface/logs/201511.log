2015-11-12 10:09:43 - 信息:error:【数据库操作错误】'cl_t_wltmb' 附近有语法错误。
SET XACT_ABORT ON BEGIN TRAN  declare @zxid int;declare @zxh varchar(50);declare @zpc varchar(50); select @zpc=right(convert(varchar(8),getdate(),112),6)+'_310012_ab'; declare @maxdjh varchar(6);set @maxdjh='001'; select top 1  @maxdjh=right('000'+cast(cast(right(a.zxxh,3) as int)+1 as varchar),3) from cl_t_wlzxd a  where a.tzid=1 and a.zxpc=@zpc order by a.zxxh desc;set @zxh=@zpc+'_'+@maxdjh; insert into cl_t_wlzxd(tzid,zxxh,lyid,lymxid,sl,zdrq,zdr,bz,zxpc,xzl,zbz,isxj) values  (@tzid,@zxh,'488358','6144036','22',getdate(),@username,'PDA扫码装箱',@zpc,'0','','0'); insert into cl_t_wlzxd(tzid,zxxh,lyid,lymxid,sl,zdrq,zdr,bz,zxpc,xzl,zbz,isxj) values  (@tzid,@zxh,'488359','6144037','8',getdate(),@username,'PDA扫码装箱',@zpc,'0','','0');select a.sm into #tmtmp from (select '15081800002' sm) a  update a set a.zxxh=@zxh,a.syzt=1 cl_t_wltmb a inner join #tmtmp b on a.tm=b.sm; insert cl_t_wlsmjlb(tzid,sm,zxxh,smlb) select @tzid,a.sm,@zxh,'tm' from #tmtmp a left join cl_t_wlsmjlb b on a.sm=b.sm and b.tzid=@tzid where b.id is null;drop table #tmtmp;select @zxh;COMMIT TRAN GO;
